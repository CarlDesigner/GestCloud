<div data-trigger-confettis>
	<slot />
</div>

<div class="wrapper">
	<canvas id="confettis"></canvas>
</div>

<script
	is:inline
	src="https://cdn.jsdelivr.net/npm/confetti-js@0.0.18/dist/index.min.js"
></script>

<style>
	.wrapper {
		top: 0;
		position: fixed;
		width: 100%;
		height: 100%;
		pointer-events: none;
	}
</style>

<script>
	// Elementos del DOM
	/** @type {HTMLCanvasElement|null} */
	const confettiElement = document.querySelector('#confettis');
	/** @type {HTMLElement|null} */
	const triggerConfettis = document.querySelector('[data-trigger-confettis]');

	/**
	 * Función para generar confetti
	 */
	function popIt() {
		if (!confettiElement || !window.ConfettiGenerator) return;
		
		const confettiSettings = {
			target: confettiElement,
			start_from_edge: true,
		};
		
		// ConfettiGenerator es cargado por el script externo
		// @ts-ignore - Cast necesario para compatibilidad de tipos
		const confetti = new window.ConfettiGenerator(confettiSettings);
		confetti.render();
	}

	// Agregar event listener después de definir la función
	if (triggerConfettis) {
		triggerConfettis.addEventListener('click', popIt);
	}
</script>
